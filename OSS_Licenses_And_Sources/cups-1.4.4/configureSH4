#!/bin/bash
#-------------------------------------------------------------
#        Copyright (c) emtrion GmbH - see ct/LICENCE.txt
#
#   !! This file was automatically generated by CrossTarget !!
#   !!       Do not make any changes into this file         !!
#
# Generated  : Wed Jul 28 14:14:25 2010
# Command    : hico7723.libdmtx.configure
# Defined in : /home/hico/Project/platform/emdist-x/conf/common/pkgs/target/libdmtx.cfg:20
#-------------------------------------------------------------
export ROOTFS=$1
export CT=/home/hico/Project/platform/emdist-current
#export CC=sh-unknown-linux-gnu-gcc
#export CXX=sh-unknown-linux-gnu-g++
#export AR=sh-unknown-linux-gnu-ar

#export CFLAGS="-I$ROOTFS/usr/local/include -I$ROOTFS/usr/include" 
#export CXXFLAGS="-I$ROOTFS/usr/local/include -I$ROOTFS/usr/include" 
#export LDFLAGS="-L$ROOTFS/usr/local/lib -L$ROOTFS/usr/lib -L$ROOTFS/lib -Wl,--rpath-link -Wl,$ROOTFS/usr/local/lib -Wl,--rpath-link -Wl,$ROOTFS/usr/lib -Wl,--rpath-link -Wl,$ROOTFS/lib"
#export PKG_CONFIG=$CT/devhost/rootfs/usr/bin/hico7723-pkg-config 

#./configure --host "i486-linux-gnu" --prefix=$ROOTFS --enable-shared

export AR=sh-unknown-linux-gnu-ar
export CC=sh-unknown-linux-gnu-gcc
export LD=sh-unknown-linux-gnu-ld
export STRIP=/ViperPlatform/emdist-current/devhost/rootfs/usr/bin/sh-unknown-linux-gnu-strip 
export RANLIB=sh-unknown-linux-gnu-ranlib 
export CXX=sh-unknown-linux-gnu-c++

echo ">>>> configure"
#./configure --host=i686-pc-linux-gnu --target=sh-unknown-linux-gnu --build=i686-pc-linux-gnu --prefix=$ROOTFS --enable-shared
./configure --host=i686-pc-linux-gnu --prefix=$ROOTFS --enable-shared --disable-dbus

echo ">>>> make clean"
make clean
echo ">>>> make all"
make all
echo ">>>> install"
sudo make install

#mkdir $ROOTFS/home#
#mkdir $ROOTFS/home/hico
#mkdir $ROOTFS/home/hico/Project
#mkdir $ROOTFS/home/hico/Project/platform
#mkdir $ROOTFS/home/hico/Project/platform/emdist-x
#mkdir $ROOTFS/home/hico/Project/platform/emdist-x/hico7723
#ln -s / $ROOTFS/home/hico/Project/platform/emdist-x/hico7723/rootfs
echo ">>>> copy cupsd.conf"
sudo mkdir $ROOTFS/etc/cups
sudo rm $ROOTFS/etc/cups/cupsd.conf
sudo cp ./cupsd.conf $ROOTFS/etc/cups/
sudo chown root:root $ROOTFS/etc/cups/cupsd.conf
echo ">>>> chown in lib/cups"
sudo chown root:root -R $ROOTFS/lib/cups/*
echo ">>>> chmod in lib/cups"
sudo chown 555 -R $ROOTFS/lib/cups/*
echo ">>>> move lib64 to lib"
sudo mv $ROOTFS/lib64/* $ROOTFS/lib/
sudo rm -rf $ROOTFS/lib64
echo ">>>> all done"



